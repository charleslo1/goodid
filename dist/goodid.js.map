{"version":3,"file":"goodid.js","sources":["../src/goodid.js"],"sourcesContent":["// defaults\nvar defaultAlphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'\nvar defaultStartTime = new Date(2018, 9, 1).getTime()\nvar defaultLength = 16\nvar defaultPrefix = ''\n\n/**\n * generate random string\n * @param  {Number} length   length\n * @return {String}          random string\n */\nfunction genRandom (length, alphabet) {\n  alphabet = alphabet || defaultAlphabet\n  length = length || 1\n  let id = ''\n  while (length-- > 0) {\n    id += alphabet[Math.random() * alphabet.length | 0]\n  }\n  return id\n}\n\n/**\n * generate timestamp string\n * @param  {String} alphabet alphabet\n * @return {String}          timestamp string\n */\nfunction genTimestamp () {\n  let timeArr = Math.round((Date.now() - defaultStartTime) / 1000).toString(36).split('')\n  let count = 3\n  let index = 0\n  while (count-- > 0) {\n    index = Math.random() * timeArr.length | 0\n    timeArr[index] = timeArr[index].toUpperCase()\n  }\n  return timeArr.join('')\n}\n\n/**\n * generate goodid\n * @param  {Number} length     length\n * @param  {String} prefix     prefix\n * @param  {String} [alphabet] alphabet (optional)\n * @return {String}            goodid\n */\nfunction goodid (length, prefix, alphabet) {\n  length = length || defaultLength\n  prefix = prefix || defaultPrefix\n  if (length <= prefix.length) throw new Error('The length parameter cannot be less than the length of the prefix.')\n  let time = genTimestamp()\n  if (length < 16 || alphabet) {\n    return [prefix, genRandom(length - prefix.length, alphabet)].join('')\n  } else {\n    return [prefix, time, genRandom(length - prefix.length - time.length)].join('')\n  }\n}\n\n/**\n * default config\n */\ngoodid.defaults = {\n  length: defaultLength,\n  prefix: defaultPrefix,\n  alphabet: defaultAlphabet,\n  startTime: defaultStartTime\n}\n\n/**\n * config default options\n * @param  {Object} options options\n */\ngoodid.config = function (options) {\n  // get options\n  options = options || goodid.defaults\n  // set config\n  defaultLength = options.length || defaultLength\n  defaultPrefix = options.prefix || defaultPrefix\n  defaultAlphabet = options.alphabet || defaultAlphabet\n  defaultStartTime = options.startTime || defaultStartTime\n}\n\n/**\n * goodid alias\n */\ngoodid.create = function () {\n  return goodid.apply(this, arguments)\n}\n\n// export\nexport default goodid\n"],"names":["defaultAlphabet","defaultStartTime","Date","getTime","defaultLength","defaultPrefix","genRandom","length","alphabet","id","Math","random","genTimestamp","timeArr","round","now","toString","split","count","index","toUpperCase","join","goodid","prefix","Error","time","defaults","config","options","startTime","create","apply","arguments"],"mappings":";;;;;;AAAA;AACA,IAAIA,kBAAkB,gEAAtB;AACA,IAAIC,mBAAmB,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,EAAqBC,OAArB,EAAvB;AACA,IAAIC,gBAAgB,EAApB;AACA,IAAIC,gBAAgB,EAApB;;;;;;;AAOA,SAASC,SAAT,CAAoBC,MAApB,EAA4BC,QAA5B,EAAsC;aACzBA,YAAYR,eAAvB;WACSO,UAAU,CAAnB;MACIE,KAAK,EAAT;SACOF,WAAW,CAAlB,EAAqB;UACbC,SAASE,KAAKC,MAAL,KAAgBH,SAASD,MAAzB,GAAkC,CAA3C,CAAN;;SAEKE,EAAP;;;;;;;;AAQF,SAASG,YAAT,GAAyB;MACnBC,UAAUH,KAAKI,KAAL,CAAW,CAACZ,KAAKa,GAAL,KAAad,gBAAd,IAAkC,IAA7C,EAAmDe,QAAnD,CAA4D,EAA5D,EAAgEC,KAAhE,CAAsE,EAAtE,CAAd;MACIC,QAAQ,CAAZ;MACIC,QAAQ,CAAZ;SACOD,UAAU,CAAjB,EAAoB;YACVR,KAAKC,MAAL,KAAgBE,QAAQN,MAAxB,GAAiC,CAAzC;YACQY,KAAR,IAAiBN,QAAQM,KAAR,EAAeC,WAAf,EAAjB;;SAEKP,QAAQQ,IAAR,CAAa,EAAb,CAAP;;;;;;;;;;AAUF,SAASC,MAAT,CAAiBf,MAAjB,EAAyBgB,MAAzB,EAAiCf,QAAjC,EAA2C;WAChCD,UAAUH,aAAnB;WACSmB,UAAUlB,aAAnB;MACIE,UAAUgB,OAAOhB,MAArB,EAA6B,MAAM,IAAIiB,KAAJ,CAAU,oEAAV,CAAN;MACzBC,OAAOb,cAAX;MACIL,SAAS,EAAT,IAAeC,QAAnB,EAA6B;WACpB,CAACe,MAAD,EAASjB,UAAUC,SAASgB,OAAOhB,MAA1B,EAAkCC,QAAlC,CAAT,EAAsDa,IAAtD,CAA2D,EAA3D,CAAP;GADF,MAEO;WACE,CAACE,MAAD,EAASE,IAAT,EAAenB,UAAUC,SAASgB,OAAOhB,MAAhB,GAAyBkB,KAAKlB,MAAxC,CAAf,EAAgEc,IAAhE,CAAqE,EAArE,CAAP;;;;;;;AAOJC,OAAOI,QAAP,GAAkB;UACRtB,aADQ;UAERC,aAFQ;YAGNL,eAHM;aAILC;;;;;;CAJb,CAWAqB,OAAOK,MAAP,GAAgB,UAAUC,OAAV,EAAmB;;YAEvBA,WAAWN,OAAOI,QAA5B;;kBAEgBE,QAAQrB,MAAR,IAAkBH,aAAlC;kBACgBwB,QAAQL,MAAR,IAAkBlB,aAAlC;oBACkBuB,QAAQpB,QAAR,IAAoBR,eAAtC;qBACmB4B,QAAQC,SAAR,IAAqB5B,gBAAxC;CAPF;;;;;AAaAqB,OAAOQ,MAAP,GAAgB,YAAY;SACnBR,OAAOS,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAP;CADF;;;;;;;;"}